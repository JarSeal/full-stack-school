(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),i=n(14),c=n.n(i),u=n(3),l=function(e){var t,n=e.persons,a=e.filterVal,o=e.loadingList,i=e.handleDelete,c=n;return a.length&&(t=a.toLowerCase().trim(),c=n.filter((function(e){return e.name.toLowerCase().includes(t)}))),c.sort((function(e,t){return function(e,t,n){var a=e[n].toUpperCase(),o=t[n].toUpperCase(),r=0;return a>o?r=1:a<o&&(r=-1),r}(e,t,"name")})),r.a.createElement("ul",{style:{listStyle:"none",padding:0}},c.length?c.map((function(e){return r.a.createElement("li",{key:"contact-item-"+e.id},e.name," ",e.number,"\xa0",r.a.createElement("button",{onClick:function(){return i(e.id,e.name)}},"Delete"))})):r.a.createElement("h4",null,o?"Loading...":"No contacts found!"))},s=function(e){var t=e.filterVal,n=e.setFilterVal;return r.a.createElement("div",null,"Filter shown with: ",r.a.createElement("input",{value:t,onChange:function(e){return function(e,t){t(e.target.value)}(e,n)}}),t.length?r.a.createElement("button",{onClick:function(){return n("")}},"x"):null)},m=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,o=e.setNewNumber,i=e.handleSubmit;return r.a.createElement("form",{onSubmit:i},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=n(1),h=n(4),p=n.n(h),b="/api/persons",g=function(e){return e.then((function(e){return e.data}))},d=function(){var e=p.a.get(b);return g(e)},E=function(e,t){var n=p.a.post(b,{name:e,number:t});return g(n)},v=function(e){var t=p.a.delete(b+"/"+e);return g(t)},y=function(e,t){var n=Object(f.a)(Object(f.a)({},e),{},{number:t}),a=p.a.put(b+"/"+e.id,n);return g(a)},j=(n(37),function(e,t,n){var o=e.type,r="notification"+function(e,t,n,o,r){switch(t){case 1:return clearTimeout(a),a=setTimeout((function(){o(Object(f.a)(Object(f.a)({},n),{},{phase:2}))}),r)," notification--start";case 2:return clearTimeout(a),0!==e&&(a=setTimeout((function(){o(Object(f.a)(Object(f.a)({},n),{},{phase:3}))}),e-10))," notification--middle";case 3:return clearTimeout(a),a=setTimeout((function(){o(Object(f.a)(Object(f.a)({},n),{},{phase:4}))}),10)," notification--end-begin";case 4:return clearTimeout(a),a=setTimeout((function(){o({msg:"",type:0,length:0,phase:0})}),r)," notification--end-begin notification--end";default:return""}}(e.length,e.phase,e,t,n);switch(o){case 1:return r+" notification--done";case 2:return r+" notification--warning";case 3:return r+" notification--error";case 4:return r+" notification--warning notification--confirmation";default:return r+" notification--hidden"}}),O=function(e){var t=e.note,n=e.setNote,a=[];return t&&t.msg.length?(a.push(t.msg),4===t.type&&a.push(r.a.createElement("div",{key:"confirm-area",className:"notification__confirm-area"},r.a.createElement("button",{onClick:function(){return function(e,t,n){t(Object(f.a)(Object(f.a)({},e),{},{phase:3})),setTimeout(e.action,n)}(t,n,300)},title:"Confirm",className:"notification__button",key:"confirm-button"},"Confirm"),"\xa0",r.a.createElement("button",{onClick:function(){return n(Object(f.a)(Object(f.a)({},t),{},{phase:3}))},title:"Cancel",className:"notification__button",key:"cancel-button"},"Cancel"))),a.push(r.a.createElement("button",{onClick:function(){return n(Object(f.a)(Object(f.a)({},t),{},{phase:3}))},title:"Close this notification",className:"notification__close",key:"close-button"}))):a.concat(null),r.a.createElement("div",{className:"notification-box-wrapper"},r.a.createElement("div",{className:j(t,n,300),style:{transitionDuration:"300ms"}},a))},w=function(){var e=Object(o.useState)({msg:"",type:0,length:0,phase:0}),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)([]),c=Object(u.a)(i,2),f=c[0],h=c[1],p=Object(o.useState)(""),b=Object(u.a)(p,2),g=b[0],j=b[1],w=Object(o.useState)(""),N=Object(u.a)(w,2),C=N[0],k=N[1],S=Object(o.useState)(""),T=Object(u.a)(S,2),_=T[0],D=T[1],V=Object(o.useState)(!0),L=Object(u.a)(V,2),x=L[0],F=L[1],U=new RegExp(/^(\d+-?)+\d+$/);Object(o.useEffect)((function(){d().then((function(e){h(e),F(!1)})).catch((function(e){console.log("Error in loading contacts!",e),a({msg:"Error in loading contacts!",type:3,length:0,phase:1}),F(!1)}))}),[]);return r.a.createElement("div",{style:{fontFamily:"sans-serif",color:"#333"}},r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{note:n,setNote:a}),r.a.createElement(s,{filterVal:_,setFilterVal:D}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(m,{newName:g,setNewName:j,newNumber:C,setNewNumber:k,handleSubmit:function(e){e.preventDefault();var t=g.trim(),n=C.trim(),o=f.filter((function(e){return e.name.toUpperCase()===t.toUpperCase()}));if(t.length)if(n.length){if(U.test(n))return o.length?(a({msg:"".concat(o[0].name," is already added to phonebook, replace the old number with a new one?"),type:4,length:0,phase:1,action:function(){y(o[0],n).then((function(e){h(f.map((function(t){return t.id===e.id?e:t}))),a({msg:"Number updated!",type:1,length:4e3,phase:1})})).catch((function(e){console.log("Error in updating a number!",e),a({msg:"Error in updating a number!",type:3,length:0,phase:1})}))}}),j(""),void k("")):void E(t,n).then((function(e){h(f.concat(e)),j(""),k(""),F(!1),a({msg:"Contact created!",type:1,length:4e3,phase:1})})).catch((function(e){console.log("Error in saving a new contact!",e),a({msg:"Error in saving a new contact!",type:3,length:0,phase:1})}));a({msg:"Number is in wrong format!",type:2,length:4e3,phase:1})}else a({msg:"Number cannot be empty!",type:2,length:4e3,phase:1});else a({msg:"Name cannot be empty!",type:2,length:4e3,phase:1})}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(l,{persons:f,filterVal:_,loadingList:x,handleDelete:function(e,t){a({msg:"Delete ".concat(t,"?"),type:4,length:0,phase:1,action:function(){v(e).then((function(t){h(f.filter((function(t){return t.id!==e}))),a({msg:"Contact removed!",type:1,length:4e3,phase:1}),F(!1)})).catch((function(e){a({msg:"Information of ".concat(t," has already been removed from the server."),type:3,length:0,phase:1}),F(!1)}))}})}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.704282ee.chunk.js.map