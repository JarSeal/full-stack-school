(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(14),c=n.n(i),u=n(3),l=function(e){var t,n=e.persons,a=e.filterVal,r=e.loadingList,i=e.handleDelete,c=n;return a.length&&(t=a.toLowerCase().trim(),c=n.filter((function(e){return e.name.toLowerCase().includes(t)}))),c.sort((function(e,t){return function(e,t,n){var a=e[n].toUpperCase(),r=t[n].toUpperCase(),o=0;return a>r?o=1:a<r&&(o=-1),o}(e,t,"name")})),o.a.createElement("ul",{style:{listStyle:"none",padding:0}},c.length?c.map((function(e){return o.a.createElement("li",{key:"contact-item-"+e.id},e.name," ",e.number,"\xa0",o.a.createElement("button",{onClick:function(){return i(e.id,e.name)}},"Delete"))})):o.a.createElement("h4",null,r?"Loading...":"No contacts found!"))},s=function(e){var t=e.filterVal,n=e.setFilterVal;return o.a.createElement("div",null,"Filter shown with: ",o.a.createElement("input",{value:t,onChange:function(e){return function(e,t){t(e.target.value)}(e,n)}}),t.length?o.a.createElement("button",{onClick:function(){return n("")}},"x"):null)},m=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,r=e.setNewNumber,i=e.handleSubmit;return o.a.createElement("form",{onSubmit:i},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:a,onChange:function(e){return r(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},f=n(1),p=n(4),h=n.n(p),d=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API||"/api/persons",b=function(e){return e.then((function(e){return e.data}))},g=function(){var e=h.a.get(d);return b(e)},E=function(e,t){var n=h.a.post(d,{name:e,number:t});return b(n)},v=function(e){var t=h.a.delete(d+"/"+e);return b(t)},O=function(e,t){var n=Object(f.a)(Object(f.a)({},e),{},{number:t}),a=h.a.put(d+"/"+e.id,n);return b(a)},y=(n(37),function(e,t,n){var r=e.type,o="notification"+function(e,t,n,r,o){switch(t){case 1:return clearTimeout(a),a=setTimeout((function(){r(Object(f.a)(Object(f.a)({},n),{},{phase:2}))}),o)," notification--start";case 2:return clearTimeout(a),0!==e&&(a=setTimeout((function(){r(Object(f.a)(Object(f.a)({},n),{},{phase:3}))}),e-10))," notification--middle";case 3:return clearTimeout(a),a=setTimeout((function(){r(Object(f.a)(Object(f.a)({},n),{},{phase:4}))}),10)," notification--end-begin";case 4:return clearTimeout(a),a=setTimeout((function(){r({msg:"",type:0,length:0,phase:0})}),o)," notification--end-begin notification--end";default:return""}}(e.length,e.phase,e,t,n);switch(r){case 1:return o+" notification--done";case 2:return o+" notification--warning";case 3:return o+" notification--error";case 4:return o+" notification--warning notification--confirmation";default:return o+" notification--hidden"}}),j=function(e){var t=e.note,n=e.setNote,a=[];return t&&t.msg.length?(a.push(t.msg),4===t.type&&a.push(o.a.createElement("div",{key:"confirm-area",className:"notification__confirm-area"},o.a.createElement("button",{onClick:function(){return function(e,t,n){t(Object(f.a)(Object(f.a)({},e),{},{phase:3})),setTimeout(e.action,n)}(t,n,300)},title:"Confirm",className:"notification__button",key:"confirm-button"},"Confirm"),"\xa0",o.a.createElement("button",{onClick:function(){return n(Object(f.a)(Object(f.a)({},t),{},{phase:3}))},title:"Cancel",className:"notification__button",key:"cancel-button"},"Cancel"))),a.push(o.a.createElement("button",{onClick:function(){return n(Object(f.a)(Object(f.a)({},t),{},{phase:3}))},title:"Close this notification",className:"notification__close",key:"close-button"}))):a.concat(null),o.a.createElement("div",{className:"notification-box-wrapper"},o.a.createElement("div",{className:y(t,n,300),style:{transitionDuration:"300ms"}},a))},N=function(){var e=Object(r.useState)({msg:"",type:0,length:0,phase:0}),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)([]),c=Object(u.a)(i,2),f=c[0],p=c[1],h=Object(r.useState)(""),d=Object(u.a)(h,2),b=d[0],y=d[1],N=Object(r.useState)(""),w=Object(u.a)(N,2),C=w[0],S=w[1],_=Object(r.useState)(""),T=Object(u.a)(_,2),k=T[0],D=T[1],L=Object(r.useState)(!0),P=Object(u.a)(L,2),V=P[0],U=P[1],A=new RegExp(/^(\d+-?)+\d+$/);Object(r.useEffect)((function(){g().then((function(e){p(e),U(!1)})).catch((function(e){console.log("Error in loading contacts!",e),a({msg:"Error in loading contacts!",type:3,length:0,phase:1}),U(!1)}))}),[]);return o.a.createElement("div",{style:{fontFamily:"sans-serif",color:"#333"}},o.a.createElement("h2",null,"Phonebook"),o.a.createElement(j,{note:n,setNote:a}),o.a.createElement(s,{filterVal:k,setFilterVal:D}),o.a.createElement("h3",null,"Add a new"),o.a.createElement(m,{newName:b,setNewName:y,newNumber:C,setNewNumber:S,handleSubmit:function(e){e.preventDefault();var t=b.trim(),n=C.trim(),r=f.filter((function(e){return e.name.toUpperCase()===t.toUpperCase()}));t.length?n.length?A.test(n)?r.length?a({msg:"".concat(r[0].name," is already added to phonebook, replace the old number with a new one?"),type:4,length:0,phase:1,action:function(){O(r[0],n).then((function(e){p(f.map((function(t){return t.id===e.id?e:t}))),a({msg:"Number updated!",type:1,length:4e3,phase:1}),y(""),S("")})).catch((function(e){console.log("Error in updating a number!",e),a({msg:"Error in updating a number!",type:3,length:0,phase:1})}))}}):E(t,n).then((function(e){p(f.concat(e)),y(""),S(""),U(!1),a({msg:"Contact created!",type:1,length:4e3,phase:1})})).catch((function(e){console.log("Error in saving a new contact!",e.response.data),a({msg:e.response&&e.response.data&&e.response.data.error?e.response.data.error:"Error in saving a new contact!",type:3,length:0,phase:1})})):a({msg:"Number is in wrong format!",type:2,length:4e3,phase:1}):a({msg:"Number cannot be empty!",type:2,length:4e3,phase:1}):a({msg:"Name cannot be empty!",type:2,length:4e3,phase:1})}}),o.a.createElement("h3",null,"Numbers"),o.a.createElement(l,{persons:f,filterVal:k,loadingList:V,handleDelete:function(e,t){a({msg:"Delete ".concat(t,"?"),type:4,length:0,phase:1,action:function(){v(e).then((function(t){p(f.filter((function(t){return t.id!==e}))),a({msg:"Contact removed!",type:1,length:4e3,phase:1}),U(!1)})).catch((function(n){p(f.filter((function(t){return t.id!==e}))),a({msg:"Information of ".concat(t," has already been removed from the server."),type:3,length:0,phase:1}),U(!1)}))}})}}))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.fc0f3adf.chunk.js.map